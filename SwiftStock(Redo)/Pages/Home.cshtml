@page
@model SwiftStock.Pages.HomeModel
@{
    ViewData["Title"] = "Home";
    Layout = "_HomepageLayout";  // This should be the name of your shared layout file
}

<!-- Page Header -->
<h1 class="text-3xl font-bold mb-8 text-[#E31837]">Available Products</h1>

<!-- Check if the user is authenticated -->
@if (User.Identity.IsAuthenticated)
{
    <div class="flex items-center gap-4">
        <!-- Display Username -->
        <span class="text-lg">Welcome, @User.Identity.Name</span>

        <!-- Account Settings Link -->
        <a href="/Settings" class="flex items-center gap-2 hover:bg-red-700 px-3 py-2 rounded-md">
            <i class="fas fa-user-circle text-xl"></i>
            <span class="text-sm">Account Settings</span>
        </a>

        <!-- Purchase History Link -->
        <a href="/PurchaseHistory" class="flex items-center gap-2 hover:bg-red-700 px-3 py-2 rounded-md">
            <i class="fas fa-history text-xl"></i>
            <span class="text-sm">Purchase History</span>
        </a>
    </div>
}
else
{
    <!-- Show message for guests to log in -->
    <div class="bg-[#1a1c23] p-6 rounded-lg border border-slate-700">
        <h3 class="text-lg font-semibold text-[#e0e0e0] mb-4">Welcome, Guest</h3>
        <p class="text-[#f5f5f5] mb-4">You are currently browsing as a guest. To view more products and make purchases, please log in.</p>
        <a href="/Login" class="bg-red-600 text-white px-4 py-2 rounded-md hover:bg-red-700">Login</a>
    </div>
}
@section Scripts {
    <script>
        document.querySelector('input[name="search"]')?.addEventListener('input', function (e) {
            const term = e.target.value.toLowerCase();
            document.querySelectorAll('.grid > div').forEach(product => {
                const name = product.querySelector('h3').textContent.toLowerCase();
                product.style.display = name.includes(term) ? 'block' : 'none';
            });
        });
    </script>
}
